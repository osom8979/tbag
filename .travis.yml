# Travis CI Build.
# HOME path: /home/travis
# Git clone path: /home/travis/build/osom8979/tbag

language: cpp

addons:
    sources:
        - george-edison55-precise-backports # cmake 3.2.3 / doxygen 1.8.3
    packages:
        - cmake
        - cmake-data

cache:
    apt: true

compiler: g++

before_install:
    - export TPARTY_HOME=$HOME/tparty
    - export LD_LIBRARY_PATH=$TPARTY_HOME/local/lib:$LD_LIBRARY_PATH
    - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
    - sudo apt-get -qq update
    - sudo apt-get install -y git g++-4.8 libncurses-dev
    - export CXX=g++-4.8

install:
    - echo $PWD
    - pushd .
    - git clone https://github.com/osom8979/tparty.git $TPARTY_HOME
    - cd $TPARTY_HOME
    - echo 'gtest.sh'    >> cache
    - echo 'tinyxml2.sh' >> cache
    - echo 'spdlog.sh'   >> cache
    - echo 'libuv.sh'    >> cache
    - ./install.sh -y
    - popd

script:
    - mkdir build
    - cd build
    - cmake ..
    - make VERBOSE=0
    - ./tester

notifications:
    email:
        on_success: always
        on_failure: always

